<DIDL-Lite xmlns="urn:schemas-upnp-org:metadata-1-0/DIDL-Lite/" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:upnp="urn:schemas-upnp-org:metadata-1-0/upnp/">
{{$root := .}}
{{with .RecordedItem}}
  <item id="{{.Id}}" parentID="01" restricted="1">
    <dc:title>{{.Name}}</dc:title>
    <upnp:class>object.item.videoItem</upnp:class>
    {{if $root.filter.Creator}}<dc:creator>{{.ChannelId}}</dc:creator>{{end}}
    {{if $root.filter.Date}}<dc:date>{{.StartAt | date}}</dc:date>{{end}}
    {{if $root.filter.WriteStatus}}<upnp:writeStatus>UNKNOWN</upnp:writeStatus>{{end}}
    {{range .VideoFiles}}
    <res protocolInfo="http-get:*:video/mp2t:*"{{if $root.filter.Res.Size}} size="{{.Size}}"{{end}}>http://{{$root.HostIP}}:8888/api/videos/{{.Id}}</res>
    {{end}}
  </item>
{{else}}
  <container id="{{.ObjectID}}" searchable="1" parentID="{{if eq .ObjectID "0"}}-1{{else if eq .ObjectID "01"}}0{{end}}" restricted="1" childCount="{{if eq .ObjectID "01"}}{{.Total}}{{else}}1{{end}}">
    <dc:title>{{if eq .ObjectID "0"}}Root{{else if eq .ObjectID "01"}}Records{{end}}</dc:title>
    <upnp:class>object.container</upnp:class>
    {{if $root.filter.WriteStatus}}<upnp:writeStatus>UNKNOWN</upnp:writeStatus>{{end}}
  </container>
{{end}}
</DIDL-Lite>