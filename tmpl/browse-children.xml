<DIDL-Lite xmlns="urn:schemas-upnp-org:metadata-1-0/DIDL-Lite/" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:upnp="urn:schemas-upnp-org:metadata-1-0/upnp/">
  {{- $root := .}}
  {{- if and (eq .ObjectID "0") (eq .StartingIndex 0)}}
  <container id="01" searchable="1" parentID="0" restricted="1" childCount="{{.Total}}">
    <dc:title>Records</dc:title>
    <upnp:class>object.container</upnp:class>
    <upnp:writeStatus>UNKNOWN</upnp:writeStatus>
  </container>
  {{- else if eq .ObjectID "01"}}
  {{- range .Records}}
  <item id="{{.Id}}" parentID="0" restricted="1">
    <dc:title>{{.Name}}</dc:title>
    <upnp:class>object.item.videoItem</upnp:class>
    {{if $root.filter.Creator}}<dc:creator>{{.ChannelId}}</dc:creator>{{end}}
    {{if $root.filter.Date}}<dc:date>{{.StartAt | date}}</dc:date>{{end}}
    {{if $root.filter.WriteStatus}}<upnp:writeStatus>UNKNOWN</upnp:writeStatus>{{end}}
    {{- range .VideoFiles}}
    <res protocolInfo="http-get:*:{{.Filename | mimetype}}:*"{{if $root.filter.Res.Size}} size="{{.Size}}"{{end}}>http://{{$root.server.IP}}:{{$root.server.Port}}/api/videos/{{.Id}}</res>
    {{- end}}
  </item>
  {{- end}}
  {{- end}}
</DIDL-Lite>